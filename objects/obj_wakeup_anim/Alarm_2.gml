if timed_out
    do_dialog = 1
else
{
    timed_out = 1
    alarm[2] = 1800
}
